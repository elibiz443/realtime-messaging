<!-- Contacts -->
<div class="bg-gray-100 flex-1 overflow-auto">
  <% @contacts.each do |contact| %>
    <form id="form" novalidate="novalidate" action="/notifications" method="get">
      <input value="<%= contact.id %>" type="search" id="query" name="search[user_id]" class="hidden">
      <div id="submit-button" class="button" onclick="submitForm()">
        <div class="bg-white px-3 flex items-center hover:bg-gray-200 cursor-pointer">
          <% if contact.notifications.present? && contact != current_user %>
            <div>
              <% if (contact.image).nil?  %>
                <%= image_tag "img_avatar.png", class: "w-12 h-auto rounded-full" %>
              <% else %>
                <%= image_tag contact.image, class: "w-12 h-auto rounded-full" %>
              <% end %>
            </div>
            <div class="ml-4 flex-1 border-b border-gray-200 py-4">
              <div class="md:flex items-bottom justify-between">
                <p class="text-gray-900 text-xs lg:text-sm"><%= contact.name %></p>
                <p class="text-xs text-gray-600">
                  <%= contact.notifications.last.created_at.strftime("%I:%M %p") %>    
                </p>
              </div>
              <p class="text-gray-500 mt-1 text-xs lg:text-sm"><%= contact.notifications.last.message %></p>
            </div>
          <% elsif contact != current_user %>
            <div>
              <% if (contact.image).nil?  %>
                <%= image_tag "img_avatar.png", class: "w-12 h-auto rounded-full" %>
              <% else %>
                <%= image_tag contact.image, class: "w-12 h-auto rounded-full" %>
              <% end %>
            </div>
            <div class="ml-4 flex-1 border-b border-gray-200 py-4">
              <div class="flex items-bottom justify-between">
                <p class="text-gray-700"><%= contact.name %></p>
              </div>
              <p class="text-gray-300 mt-1 text-sm">No messages yet...</p>
            </div>
          <% end %>
        </div>
      </div>
    </form>
  <% end %>
</div>
